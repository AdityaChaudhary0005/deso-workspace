{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tyler\\\\Documents\\\\DeSo\\\\deso-workspace\\\\apps\\\\developer-hub\\\\src\\\\components\\\\profile\\\\DisplayUser.tsx\",\n    _s = $RefreshSig$();\n\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport Avatar from '@mui/material/Avatar';\nimport { useEffect, useState } from 'react';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { SampleAppMyUserInfo, SampleAppMyFollowersInfo, SampleAppMyProfilePicture } from '../../recoil/AppState.atoms';\nimport CreatePostInput from './CreatePostInput';\nimport { getFollowerCount } from '../../services/utils';\nimport UserActions from '../UserActions';\nimport { desoService } from '../../chapters/ChapterHelper/Chapter.atom';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DisplayUser = ({\n  publicKey,\n  isMyAccount\n}) => {\n  _s();\n\n  var _user$profileInfoResp, _user$profileInfoResp2;\n\n  const deso = useRecoilValue(desoService);\n  const [user, setUser] = useRecoilState(SampleAppMyUserInfo);\n  const [profilePicture, setProfilePicture] = useRecoilState(SampleAppMyProfilePicture);\n  const [userFollowers, setUserFollowers] = useRecoilState(SampleAppMyFollowersInfo);\n  const [profileDescriptionCard, setCard] = useState(null);\n  useEffect(() => {\n    getMyInfo(publicKey);\n  }, []);\n  useEffect(() => {\n    if (profilePicture && user) {\n      setCard(generateCard(user, profilePicture));\n    }\n  }, [profilePicture, user, userFollowers]);\n\n  const getMyInfo = async publicKey => {\n    let profileInfoResponse;\n\n    if (publicKey !== null) {\n      var _profileInfoResponse, _profileInfoResponse$;\n\n      const userInfoResponse = await deso.user.getUserStateless({\n        PublicKeysBase58Check: [publicKey]\n      });\n      profileInfoResponse = await await deso.user.getSingleProfile({\n        PublicKeyBase58Check: publicKey\n      });\n      const profilePictureSrc = deso.user.getSingleProfilePicture((_profileInfoResponse = profileInfoResponse) == null ? void 0 : (_profileInfoResponse$ = _profileInfoResponse.Profile) == null ? void 0 : _profileInfoResponse$.PublicKeyBase58Check);\n      setUser({\n        profileInfoResponse,\n        userInfoResponse\n      });\n      setProfilePicture(profilePictureSrc);\n      const followers = await deso.social.getFollowsStateless({\n        PublicKeyBase58Check: publicKey\n      });\n      setUserFollowers(followers);\n    }\n  };\n\n  const generateCard = (myUserInfo, profilePictureSrc) => {\n    var _profileInfoResponse$2, _profileInfoResponse$3;\n\n    const userInfoResponse = myUserInfo == null ? void 0 : myUserInfo.userInfoResponse;\n    const profileInfoResponse = myUserInfo == null ? void 0 : myUserInfo.profileInfoResponse;\n\n    if (!(userInfoResponse && profileInfoResponse)) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Card, {\n      variant: \"outlined\",\n      className: \"mb-5 pb-2\",\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          src: profilePictureSrc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 19\n        }, this),\n        subheader: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-start\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold\",\n            children: `@${profileInfoResponse == null ? void 0 : (_profileInfoResponse$2 = profileInfoResponse.Profile) == null ? void 0 : _profileInfoResponse$2.Username}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3 font-semibold\",\n            children: [\"Followers: \", userFollowers == null ? void 0 : userFollowers.NumFollowers]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3 font-semibold\",\n            children: [\"Following: \", getFollowerCount(userInfoResponse)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-around mx-3 my-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-4 mb-5\",\n        children: profileInfoResponse == null ? void 0 : (_profileInfoResponse$3 = profileInfoResponse.Profile) == null ? void 0 : _profileInfoResponse$3.Description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), isMyAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" ml-4 mr-20\",\n        children: /*#__PURE__*/_jsxDEV(CreatePostInput, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col w-[600px] mx-auto \",\n    children: [isMyAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-[#fff]  font-bold text-lg mb-2 font-mono\",\n      children: [\"You are viewing \", user == null ? void 0 : (_user$profileInfoResp = user.profileInfoResponse) == null ? void 0 : (_user$profileInfoResp2 = _user$profileInfoResp.Profile) == null ? void 0 : _user$profileInfoResp2.Username, \"'s Page\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w\",\n      children: profileDescriptionCard\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: isMyAccount && /*#__PURE__*/_jsxDEV(UserActions, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DisplayUser, \"cGzpzwNcefO6e0GB0tAQEr7dZu8=\", false, function () {\n  return [useRecoilValue, useRecoilState, useRecoilState, useRecoilState];\n});\n\n_c = DisplayUser;\nexport default DisplayUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"DisplayUser\");","map":{"version":3,"sources":["C:/Users/tyler/Documents/DeSo/deso-workspace/apps/developer-hub/src/components/profile/DisplayUser.tsx"],"names":["Card","CardHeader","Avatar","useEffect","useState","useRecoilState","useRecoilValue","SampleAppMyUserInfo","SampleAppMyFollowersInfo","SampleAppMyProfilePicture","CreatePostInput","getFollowerCount","UserActions","desoService","DisplayUser","publicKey","isMyAccount","deso","user","setUser","profilePicture","setProfilePicture","userFollowers","setUserFollowers","profileDescriptionCard","setCard","getMyInfo","generateCard","profileInfoResponse","userInfoResponse","getUserStateless","PublicKeysBase58Check","getSingleProfile","PublicKeyBase58Check","profilePictureSrc","getSingleProfilePicture","Profile","followers","social","getFollowsStateless","myUserInfo","Username","NumFollowers","Description"],"mappings":"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","sourcesContent":["import Card from '@mui/material/Card';\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport { ReactElement, useEffect, useState } from 'react';\r\nimport { useRecoilState, useRecoilValue } from 'recoil';\r\nimport {\r\n  SampleAppMyUserInfo,\r\n  SampleAppMyFollowersInfo,\r\n  SampleAppMyProfilePicture,\r\n  MyUserInfoType,\r\n} from '../../recoil/AppState.atoms';\r\nimport CreatePostInput from './CreatePostInput';\r\nimport { getFollowerCount } from '../../services/utils';\r\nimport UserActions from '../UserActions';\r\nimport {\r\n  GetFollowsResponse,\r\n  GetSingleProfileResponse,\r\n} from 'deso-protocol-types';\r\nimport { desoService } from '../../chapters/ChapterHelper/Chapter.atom';\r\nexport interface DisplayUserProps {\r\n  publicKey: string;\r\n  isMyAccount: boolean;\r\n}\r\nconst DisplayUser = ({ publicKey, isMyAccount }: DisplayUserProps) => {\r\n  const deso = useRecoilValue(desoService);\r\n  const [user, setUser] = useRecoilState<MyUserInfoType | null>(\r\n    SampleAppMyUserInfo\r\n  );\r\n  const [profilePicture, setProfilePicture] = useRecoilState<string | null>(\r\n    SampleAppMyProfilePicture\r\n  );\r\n  const [userFollowers, setUserFollowers] =\r\n    useRecoilState<GetFollowsResponse | null>(SampleAppMyFollowersInfo);\r\n  const [profileDescriptionCard, setCard] = useState<ReactElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    getMyInfo(publicKey);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (profilePicture && user) {\r\n      setCard(generateCard(user, profilePicture));\r\n    }\r\n  }, [profilePicture, user, userFollowers]);\r\n\r\n  const getMyInfo = async (publicKey: string) => {\r\n    let profileInfoResponse: GetSingleProfileResponse;\r\n    if (publicKey !== null) {\r\n      const userInfoResponse = await deso.user.getUserStateless({\r\n        PublicKeysBase58Check: [publicKey as string],\r\n      });\r\n\r\n      profileInfoResponse = await await deso.user.getSingleProfile({\r\n        PublicKeyBase58Check: publicKey,\r\n      });\r\n      const profilePictureSrc = deso.user.getSingleProfilePicture(\r\n        profileInfoResponse?.Profile?.PublicKeyBase58Check as string\r\n      );\r\n      setUser({ profileInfoResponse, userInfoResponse });\r\n      setProfilePicture(profilePictureSrc);\r\n      const followers = await deso.social.getFollowsStateless({\r\n        PublicKeyBase58Check: publicKey,\r\n      });\r\n      setUserFollowers(followers);\r\n    }\r\n  };\r\n\r\n  const generateCard = (\r\n    myUserInfo: MyUserInfoType,\r\n    profilePictureSrc: string\r\n  ) => {\r\n    const userInfoResponse = myUserInfo?.userInfoResponse;\r\n    const profileInfoResponse = myUserInfo?.profileInfoResponse;\r\n    if (!(userInfoResponse && profileInfoResponse)) {\r\n      return <></>;\r\n    }\r\n    return (\r\n      <Card variant=\"outlined\" className=\"mb-5 pb-2\">\r\n        <CardHeader\r\n          avatar={<Avatar src={profilePictureSrc}></Avatar>}\r\n          subheader={\r\n            <div className=\"flex justify-start\">\r\n              <div className=\"font-bold\">{`@${profileInfoResponse?.Profile?.Username}`}</div>\r\n              <div className=\"ml-3 font-semibold\">\r\n                Followers: {userFollowers?.NumFollowers}\r\n              </div>\r\n              <div className=\"ml-3 font-semibold\">\r\n                Following: {getFollowerCount(userInfoResponse)}\r\n              </div>\r\n            </div>\r\n          }\r\n        ></CardHeader>\r\n        <div className=\"flex justify-around mx-3 my-3\"></div>\r\n        <div className=\"mx-4 mb-5\">\r\n          {profileInfoResponse?.Profile?.Description}\r\n        </div>\r\n        {isMyAccount && (\r\n          <div className=\" ml-4 mr-20\">\r\n            <CreatePostInput></CreatePostInput>\r\n          </div>\r\n        )}\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col w-[600px] mx-auto \">\r\n      {isMyAccount && (\r\n        <div className=\"text-center text-[#fff]  font-bold text-lg mb-2 font-mono\">\r\n          You are viewing {user?.profileInfoResponse?.Profile?.Username}'s Page\r\n        </div>\r\n      )}\r\n      <div className=\"w\">{profileDescriptionCard}</div>\r\n      <div>{isMyAccount && <UserActions></UserActions>}</div>\r\n    </div>\r\n  );\r\n};\r\nexport default DisplayUser;\r\n"]},"metadata":{},"sourceType":"module"}